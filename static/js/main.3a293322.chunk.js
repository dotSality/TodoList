(this.webpackJsonptodolist=this.webpackJsonptodolist||[]).push([[0],{103:function(t,e,n){},104:function(t,e,n){},128:function(t,e,n){"use strict";n.r(e);var i=n(0),a=n.n(i),c=n(28),o=n.n(c);n(103),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(104);var r,s,l=n(13),d=n(174),u=n(184),O=n(169),j=n(2),b=a.a.memo((function(t){var e=Object(i.useState)(""),n=Object(l.a)(e,2),a=n[0],c=n[1],o=Object(i.useState)(!1),r=Object(l.a)(o,2),s=r[0],b=r[1],f=function(){var e=a.trim();c(""),e?t.addItem(e):b(!0)};return Object(j.jsxs)("div",{children:[Object(j.jsx)(d.a,{disabled:t.disabled,error:s,helperText:s&&"Title is required",label:"Enter title",value:a,onChange:function(t){c(t.currentTarget.value),b(!1)},onKeyPress:function(t){"Enter"===t.key&&f()}}),Object(j.jsx)(u.a,{disabled:t.disabled,size:"small",onClick:f,children:Object(j.jsx)(O.a,{fontSize:"large"})})]})})),f=n(15),h=n(14),T=n(56),p=n.n(T),m=p.a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"ecad3ae6-8083-4154-b722-6cea4b99f288"}}),g=function(){return m.get("todo-lists").then((function(t){return t.data}))},v=function(t){return m.post("todo-lists",{title:t}).then((function(t){return t.data}))},k=function(t){return m.delete("/todo-lists/".concat(t)).then((function(t){return t.data}))},I=function(t,e){return m.put("/todo-lists/".concat(t),{title:e})},S={status:"idle",error:null},x=function(t){return{type:"APP/SET-STATUS",status:t}},D=function(t){return{type:"APP/SET-ERROR",error:t}},y=function(t,e){t.messages.length?e(D(t.messages[0])):e(D("Some error occured")),e(x("failed"))},E=function(t,e){e(D(t.message)),e(x("failed"))},C=function(t,e){return{type:"TODO/CHANGE-FILTER",filter:t,id:e}},A=[],w=n(21),K=n(3),N=p.a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/todo-lists/",withCredentials:!0,headers:{"API-KEY":"ecad3ae6-8083-4154-b722-6cea4b99f288"}}),P=function(t){return N.get("".concat(t,"/tasks")).then((function(t){return t.data}))},R=function(t,e){return N.post("".concat(t,"/tasks"),{title:e}).then((function(t){return t.data}))},L=function(t,e){return N.delete("".concat(t,"/tasks/").concat(e)).then((function(t){return t.data}))},H=function(t,e,n){return N.put("".concat(t,"/tasks/").concat(e),n).then((function(t){return t.data.data.item}))};!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(r||(r={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.High=2]="High",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(s||(s={}));var U=function(t,e,n){return{type:"TASKS/UPDATE-TASK",taskID:t,model:e,todolistID:n}},z={},G=n(60),M=n(89),V=Object(G.b)({tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"TASKS/REMOVE-TASK":return Object(h.a)(Object(h.a)({},t),{},Object(K.a)({},e.todolistID,t[e.todolistID].filter((function(t){return t.id!==e.taskID}))));case"TASKS/ADD-TASK":var n=Object(h.a)({},t),i=n[e.task.todoListId];return n[e.task.todoListId]=[e.task].concat(Object(f.a)(i)),n;case"TASKS/UPDATE-TASK":return Object(h.a)(Object(h.a)({},t),{},Object(K.a)({},e.todolistID,t[e.todolistID].map((function(t){return e.taskID===t.id?Object(h.a)(Object(h.a)({},t),e.model):t}))));case"TASKS/CHANGE-TITLE":return Object(h.a)(Object(h.a)({},t),{},Object(K.a)({},e.todolistID,t[e.todolistID].map((function(t){return t.id===e.taskID?Object(h.a)(Object(h.a)({},t),{},{title:e.title}):t}))));case"TODO/SET-TODO":var a=Object(h.a)({},t);return e.todolists.forEach((function(t){return a[t.id]=[]})),a;case"TASKS/SET-TASKS":return Object(h.a)(Object(h.a)({},t),{},Object(K.a)({},e.tlId,e.tasks));case"TODO/REMOVE-TODO":var c=Object(h.a)({},t);return delete c[e.todolistID],c;default:return t}},todolists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"TODO/REMOVE-TODO":return t.filter((function(t){return t.id!==e.todolistID}));case"TODO/SET-TODO":return e.todolists.map((function(t){return Object(h.a)(Object(h.a)({},t),{},{filter:"all"})}));case"TODO/ADD-TODO":return[Object(h.a)(Object(h.a)({},e.todo),{},{filter:"all",entityStatus:"idle"})].concat(Object(f.a)(t));case"TODO/CHANGE-TODO-TITLE":return Object(f.a)(t.map((function(t){return t.id===e.id?Object(h.a)(Object(h.a)({},t),{},{title:e.title}):t})));case"TODO/CHANGE-FILTER":return Object(f.a)(t.map((function(t){return t.id===e.id?Object(h.a)(Object(h.a)({},t),{},{filter:e.filter}):t})));case"TODO/CHANGE-ENTITY":return t.map((function(t){return t.id===e.tlId?Object(h.a)(Object(h.a)({},t),{},{entityStatus:e.entityStatus}):t}));default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"APP/SET-STATUS":return Object(h.a)(Object(h.a)({},t),{},{status:e.status});case"APP/SET-ERROR":return Object(h.a)(Object(h.a)({},t),{},{error:e.error});default:return t}}}),Y=Object(G.c)(V,Object(G.a)(M.a)),B=w.c;window.store=Y;var F=n(170),J=a.a.memo((function(t){var e=Object(i.useState)(!1),n=Object(l.a)(e,2),a=n[0],c=n[1],o=Object(i.useState)(t.title),r=Object(l.a)(o,2),s=r[0],O=r[1],b=function(){return c(!0)},f=function(){c(!1),t.setNewTitle(s)};return a?Object(j.jsx)(d.a,{disabled:t.disabled,style:{width:"148px"},value:s,onBlur:f,autoFocus:!0,onChange:function(t){O(t.currentTarget.value)},onKeyPress:function(t){"Enter"===t.key&&f()}}):Object(j.jsxs)("span",{onDoubleClick:b,style:{display:"inline-block",margin:"0 auto 0 0"},children:[t.title,Object(j.jsx)(u.a,{style:{display:"inline-block"},disabled:t.disabled,size:"small",onClick:b,children:Object(j.jsx)(F.a,{fontSize:"small"})})]})})),W=n(178),q=n(176),$=n(171),Q=a.a.memo((function(t){var e=Object(w.b)(),n=Object(i.useCallback)((function(){return e((n=t.todolistId,i=t.task.id,function(t){t(x("loading")),L(n,i).then((function(e){t({type:"TASKS/REMOVE-TASK",taskID:i,todolistID:n}),t(x("idle"))}))}));var n,i}),[e,t.task.id,t.todolistId]),a=Object(i.useCallback)((function(n){var i,a,c,o=n.currentTarget.checked?r.Completed:r.New;e((i=t.todolistId,a=t.task.id,c=o,function(t,e){t(x("loading"));var n=e().tasks[i].find((function(t){return t.id===a}));if(n){var o=Object(h.a)(Object(h.a)({},n),{},{status:c});H(i,a,o).then((function(e){t(U(a,o,i)),t(x("idle"))})).catch((function(e){E(e,t)}))}}))}),[e,t.task.id,t.todolistId]),c=Object(i.useCallback)((function(n){e(function(t,e,n){return function(i,a){i(x("loading"));var c=a().tasks[t].find((function(t){return t.id===e}));if(c){var o=Object(h.a)(Object(h.a)({},c),{},{title:n});H(t,e,o).then((function(n){i(U(e,o,t)),i(x("idle"))})).catch((function(t){E(t,i)}))}}}(t.todolistId,t.task.id,n))}),[e,t.task.id,t.todolistId]);return Object(j.jsxs)(W.a,{style:{padding:"0",display:"flex",justifyContent:"space-between"},alignItems:"center",className:t.task.status===r.Completed?"is-done":"",children:[Object(j.jsx)(q.a,{onChange:a,checked:t.task.status===r.Completed,color:"primary",size:"small"}),Object(j.jsx)(J,{setNewTitle:c,title:t.task.title}),Object(j.jsx)(u.a,{size:"small",onClick:n,children:Object(j.jsx)($.a,{fontSize:"small"})})]})})),X=n(185),Z=n(183),_=n(186),tt=n(187),et=a.a.memo((function(t){var e=Object(w.c)((function(e){return e.todolists.filter((function(e){return e.id===t.todolistId}))[0]})),n=Object(w.c)((function(e){return e.tasks[t.todolistId]})),a=Object(w.b)();Object(i.useEffect)((function(){var t;a((t=e.id,function(e){e(x("loading")),P(t).then((function(n){e(function(t,e){return{type:"TASKS/SET-TASKS",tasks:e,tlId:t}}(t,n.items)),e(x("idle"))}))}))}),[]);var c=Object(i.useCallback)((function(t){a(function(t,e){return function(n){n(x("loading")),R(t,e).then((function(t){0===t.resultCode?(n({type:"TASKS/ADD-TASK",task:t.data.item}),n(x("idle"))):(t.messages.length?n(D(t.messages[0])):n(D("Some error occured")),n(x("failed")))})).catch((function(t){n(D(t.message)),n(x("failed"))}))}}(e.id,t))}),[a,t.todolistId]),o=Object(i.useCallback)((function(e){a(function(t,e){return function(n){n(x("loading")),I(t,e).then((function(i){0===i.resultCode?(n(function(t,e){return{type:"TODO/CHANGE-TODO-TITLE",title:t,id:e}}(e,t)),n(x("idle"))):y(i,n)})).catch((function(t){return E(t,n)}))}}(t.todolistId,e))}),[a,t.todolistId]),s=Object(i.useCallback)((function(){var e;a((e=t.todolistId,function(t){t(function(t,e){return{type:"TODO/CHANGE-ENTITY",tlId:t,entityStatus:"loading"}}(e)),t(x("loading")),k(e).then((function(n){0===n.resultCode?(t({type:"TODO/REMOVE-TODO",todolistID:e}),t(x("idle"))):y(n,t)})).catch((function(e){return E(e,t)}))}))}),[a,t.todolistId]),l=Object(i.useCallback)((function(){return a(C("all",t.todolistId))}),[a,t.todolistId]),d=Object(i.useCallback)((function(){return a(C("active",t.todolistId))}),[a,t.todolistId]),O=Object(i.useCallback)((function(){return a(C("completed",t.todolistId))}),[a,t.todolistId]),f=n;return"active"===e.filter&&(f=n.filter((function(t){return t.status===r.New}))),"completed"===e.filter&&(f=n.filter((function(t){return t.status===r.Completed}))),Object(j.jsxs)("div",{className:"todoList",children:[Object(j.jsxs)(X.a,{align:"center",children:[Object(j.jsx)(J,{disabled:"loading"===e.entityStatus,setNewTitle:o,title:t.title}),Object(j.jsx)(u.a,{disabled:"loading"===e.entityStatus,onClick:s,children:Object(j.jsx)($.a,{})})]}),Object(j.jsx)(b,{disabled:"loading"===e.entityStatus,addItem:c}),Object(j.jsx)(Z.a,{children:f&&f.map((function(e){return Object(j.jsx)(Q,{task:e,todolistId:t.todolistId},e.id)}))}),Object(j.jsx)("div",{children:Object(j.jsxs)(_.a,{variant:"outlined","aria-label":"medium button group",disableElevation:!0,children:[Object(j.jsx)(tt.a,{variant:"all"===e.filter?"contained":"outlined",disabled:"loading"===e.entityStatus,onClick:l,children:"All"}),Object(j.jsx)(tt.a,{variant:"active"===e.filter?"contained":"outlined",disabled:"loading"===e.entityStatus,onClick:d,children:"Active"}),Object(j.jsx)(tt.a,{variant:"completed"===e.filter?"contained":"outlined",disabled:"loading"===e.entityStatus,onClick:O,children:"Completed"})]})})]})})),nt=n(173),it=n(181),at=n(182),ct=n(188),ot=n(189),rt=n(190),st=n(191),lt=n(179),dt=n(177),ut=a.a.forwardRef((function(t,e){return Object(j.jsx)(dt.a,Object(h.a)({elevation:6,ref:e,variant:"filled"},t))}));function Ot(){var t=B((function(t){return t.app})).error,e=Object(w.b)(),n=function(t,n){"clickaway"!==n&&e(D(null))};return Object(j.jsx)(lt.a,{open:t,autoHideDuration:5e3,onClose:n,children:Object(j.jsx)(ut,{onClose:n,severity:"error",sx:{width:"100%"},children:t})})}var jt=function(){var t=Object(w.c)((function(t){return t.todolists})),e=B((function(t){return t.app})).status,n=Object(w.b)();Object(i.useEffect)((function(){n((function(t,e){t(x("loading")),g().then((function(e){e?(t({type:"TODO/SET-TODO",todolists:e}),t(x("idle"))):y(e,t)})).catch((function(e){return E(e,t)}))}))}),[]);var a=Object(i.useCallback)((function(t){n(function(t){return function(e){e(x("loading")),v(t).then((function(n){0===n.resultCode?(e(function(t,e){return{type:"TODO/ADD-TODO",title:t,todo:e}}(t,n.data.item)),e(x("idle"))):y(n,e)})).catch((function(t){return E(t,e)}))}}(t))}),[n]),c=t.map((function(t){return Object(j.jsx)(it.a,{item:!0,children:Object(j.jsx)(at.a,{elevation:14,style:{padding:"10px"},children:Object(j.jsx)(et,{todolistId:t.id,title:t.title})})},t.id)}));return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(ct.a,{position:"static",children:Object(j.jsxs)(ot.a,{style:{justifyContent:"space-between"},children:[Object(j.jsx)(u.a,{edge:"start",color:"inherit","aria-label":"menu",children:Object(j.jsx)(nt.a,{})}),Object(j.jsx)(X.a,{variant:"h6",children:"Todolists"}),Object(j.jsx)(tt.a,{color:"inherit",variant:"outlined",children:"Login"})]})}),"loading"===e&&Object(j.jsx)(rt.a,{}),Object(j.jsx)(st.a,{fixed:!0,children:Object(j.jsxs)(it.a,{container:!0,style:{padding:"30px 0"},children:[Object(j.jsx)(b,{addItem:a}),Object(j.jsx)(it.a,{container:!0,spacing:5,children:c})]})}),Object(j.jsx)(Ot,{})]})};o.a.render(Object(j.jsx)(w.a,{store:Y,children:Object(j.jsx)(jt,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[128,1,2]]]);
//# sourceMappingURL=main.3a293322.chunk.js.map